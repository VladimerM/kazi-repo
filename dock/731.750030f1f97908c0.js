"use strict";(self.webpackChunktbconline=self.webpackChunktbconline||[]).push([[731],{1731:(_,g,s)=>{s.r(g),s.d(g,{DepositModule:()=>O});var u=s(6895),d=s(1135),p=s(8505),c=s(262),a=s(9646),t=s(8256),l=s(8958),h=s(4698);function f(o,i){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"div",6)(3,"h1"),t._uU(4),t.qZA(),t.TgZ(5,"h1"),t._uU(6),t.qZA(),t.TgZ(7,"h1"),t._uU(8),t.qZA()(),t.TgZ(9,"button",7),t.NdJ("click",function(){const P=t.CHM(n).index,b=t.oxw(3);return t.KtG(b.confirm(P))}),t._uU(10),t.qZA()(),t.BQk()}if(2&o){const n=i.$implicit,e=i.index,r=t.oxw(2).ngIf;t.xp6(4),t.AsE(" ","geo"==r?"\u10d5\u10d0\u10d3\u10d8\u10d0\u10dc\u10d8 \u10d0\u10dc\u10d0\u10d1\u10d0\u10e0\u10d8":"Term Deposit"," ",e+1," "),t.xp6(2),t.Oqu(n.date),t.xp6(2),t.AsE("",n.amount," ","geo"==r?"\u10da\u10d0\u10e0\u10d8":"GEL",""),t.xp6(2),t.hij(" ","geo"==r?"\u10d0\u10dc\u10d0\u10d1\u10e0\u10d8\u10e1 \u10d3\u10d0\u10e0\u10e6\u10d5\u10d4\u10d5\u10d0":"Close Deposit"," ")}}function m(o,i){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,f,11,6,"ng-container",4),t.qZA()),2&o){const n=i.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function D(o,i){if(1&o&&(t.TgZ(0,"main")(1,"h1",1),t._uU(2),t.qZA(),t.YNc(3,m,2,1,"div",2),t.ALo(4,"async"),t.qZA()),2&o){const n=i.ngIf,e=t.oxw();t.xp6(2),t.hij(" ","geo"==n?"\u10db\u10d8\u10db\u10d3\u10d8\u10dc\u10d0\u10e0\u10d4 \u10d0\u10dc\u10d0\u10d1\u10e0\u10d4\u10d1\u10d8":"Current deposits"," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,2,e.userDeposits))}}let C=(()=>{class o{constructor(n,e){this.loginServ=n,this.http=e,this.loggedUserId="",this.lang=new d.X("geo"),this.userDeposits=new d.X([]),this.depositArr=[],this.getDate=new Date,this.today=`${this.getDate.getDate()}/${this.getDate.getMonth()}/${this.getDate.getFullYear()}`,this.userAccount={account:"",amount:"",id:""},this.userTransactions=[],this.loginServ.loggedUserId.subscribe(r=>{this.loggedUserId=r}),this.loginServ.language.subscribe(r=>{this.lang.next(r)})}ngOnInit(){this.getDeposits(),this.getAccount(),this.getUserTransactions()}getUserTransactions(){this.http.getTransaction(this.loggedUserId).pipe((0,p.b)(n=>{this.userTransactions=n.transactions}),(0,c.K)(n=>(console.log(n.message),(0,a.of)("error")))).subscribe()}getDeposits(){this.http.getDeposit(this.loggedUserId).pipe((0,p.b)(n=>{this.userDeposits.next(n.deposits),this.depositArr=n.deposits}),(0,c.K)(n=>(console.log(n.message),(0,a.of)("error")))).subscribe()}getAccount(){this.http.getAccount(this.loggedUserId).pipe((0,p.b)(n=>{this.userAccount=n}),(0,c.K)(n=>(console.log(n.message),(0,a.of)("error")))).subscribe()}confirm(n){const e=this.depositArr.splice(n,1);this.userAccount.amount=String(Number(this.userAccount.amount)+e[0].amount+e[0].amount/10),this.userDeposits.next(this.depositArr),this.userTransactions.push({date:this.today,receiver:this.userAccount.account,transferror:"Close Deposit",amount:e[0].amount+e[0].amount/10}),this.updateDeposit(),this.updateAccount(),this.updateTransactions()}updateDeposit(){this.http.updateDeposit(this.depositArr,this.loggedUserId).pipe((0,c.K)(n=>(console.log(n.message),(0,a.of)("error")))).subscribe()}updateAccount(){this.http.updateAccount(this.userAccount).pipe((0,c.K)(n=>(console.log(n.message),(0,a.of)("error")))).subscribe()}updateTransactions(){this.http.updateTransactions(this.userTransactions,this.loggedUserId).pipe((0,c.K)(n=>(console.log(n.message),(0,a.of)("error")))).subscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(l.r),t.Y36(h.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-deposit"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["class","deposit-container",4,"ngIf"],[1,"deposit-container"],[4,"ngFor","ngForOf"],[1,"deposits"],[1,"deposit"],[1,"confirm",3,"click"]],template:function(n,e){1&n&&(t.YNc(0,D,5,4,"main",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.lang))},dependencies:[u.sg,u.O5,u.Ov],styles:["main[_ngcontent-%COMP%]{width:1280px;margin:50px auto auto;border-radius:25px;padding:25px 0;background-color:#fff;display:flex;flex-direction:column}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:50px;padding-left:25px;font-size:24px;font-weight:700;border-bottom:1px solid #00a3e0;margin-bottom:50px}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{width:150px;border:1px solid #00a3e0;border-radius:15px;margin-left:65px;font-size:16px;background-color:#fff}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background-color:#00a3e0;color:#fff;cursor:pointer}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-left:25px;border:1px solid;background-color:#fff;font-size:16px;border-color:red;border-radius:15px;cursor:pointer}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]{height:500px;overflow:auto;display:flex;flex-wrap:wrap;justify-content:space-around}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]{background-color:#00a3e0;color:#fff;font-weight:700;border-radius:25px;margin-bottom:25px;padding:25px 0;width:45%;height:150px;overflow:hidden;transition:.5s linear}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]   .deposit[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;text-align:center}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]   .deposit[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:30%;font-size:20px}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{width:170px;margin-top:25px;border:1px solid;background-color:#fff;font-size:16px;border-radius:15px;cursor:pointer;background-color:#00a3e0;color:#fff;margin-left:-170px;transition:.5s linear;padding:5px 10px}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]:hover{background-color:#fff;color:#00a3e0;font-weight:700}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]:hover{border:5px solid #00a3e0;background-color:#fff;color:#00a3e0;cursor:pointer}main[_ngcontent-%COMP%]   .deposit-container[_ngcontent-%COMP%]   .deposits[_ngcontent-%COMP%]:hover   .confirm[_ngcontent-%COMP%]{margin-left:50px}"],changeDetection:0}),o})();var x=s(7590),M=s(346);let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,x.m,M.Bz.forChild([{path:"",component:C}])]}),o})()}}]);