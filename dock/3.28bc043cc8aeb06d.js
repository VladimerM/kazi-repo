"use strict";(self.webpackChunktbconline=self.webpackChunktbconline||[]).push([[3],{6003:(L,m,r)=>{r.r(m),r.d(m,{LoanModule:()=>E});var g=r(6895),s=r(433),p=r(1135),h=r(8505),u=r(262),c=r(9646),n=r(8256),d=r(8958),f=r(4698);function C(o,a){if(1&o&&(n.TgZ(0,"h1",4),n._uU(1),n.qZA()),2&o){const t=n.oxw().ngIf;n.xp6(1),n.hij(" ","geo"==t?"\u10d0\u10e0\u10d0\u10e1\u10ec\u10dd\u10e0\u10d8 \u10d7\u10d0\u10dc\u10ee\u10d0":"Wrong amount"," ")}}function x(o,a){if(1&o&&(n.TgZ(0,"h1",4),n._uU(1),n.qZA()),2&o){const t=n.oxw().ngIf;n.xp6(1),n.hij(" ","geo"==t?"\u10d0\u10e0 \u10d2\u10d0\u10e5\u10d5\u10d7 \u10e1\u10d0\u10d9\u10db\u10d0\u10e0\u10d8\u10e1\u10d8 \u10d7\u10d0\u10dc\u10ee\u10d0 \u10d0\u10dc\u10d2\u10d0\u10e0\u10d8\u10e8\u10d6\u10d4":"You don't have enough amount on your account"," ")}}const D=function(o){return{"not-allowed":o}};function M(o,a){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",7)(2,"div",8)(3,"h1"),n._uU(4),n.qZA(),n.TgZ(5,"h1"),n._uU(6),n.qZA(),n.TgZ(7,"h1"),n._uU(8),n.qZA()(),n.TgZ(9,"div",9),n._UZ(10,"input",10),n.TgZ(11,"button",11),n.NdJ("click",function(){const l=n.CHM(t).index,v=n.oxw(3);return n.KtG(v.confirm(l))}),n._uU(12),n.qZA()()(),n.BQk()}if(2&o){const t=a.$implicit,e=a.index,i=n.oxw(2).ngIf,l=n.oxw();n.xp6(4),n.AsE(" ","geo"==i?"\u10e1\u10d0\u10db\u10dd\u10db\u10ee\u10db\u10d0\u10e0\u10d4\u10d1\u10da\u10dd \u10e1\u10d4\u10e1\u10ee\u10d8":"Consumer Loans"," ",e+1," "),n.xp6(2),n.Oqu(t.date),n.xp6(2),n.AsE("",t.amount," ","geo"==i?"\u10da\u10d0\u10e0\u10d8":"GEL",""),n.xp6(2),n.Q6J("formControl",l.inputAmount),n.xp6(1),n.Q6J("disabled",l.inputAmount.invalid)("ngClass",n.VKq(9,D,l.inputAmount.invalid)),n.xp6(1),n.hij(" ","geo"==i?"\u10e1\u10d4\u10e1\u10ee\u10d8\u10e1 \u10d3\u10d0\u10e4\u10d0\u10e0\u10d5\u10d0":"Close Loan"," ")}}function O(o,a){if(1&o&&(n.TgZ(0,"div",5),n.YNc(1,M,13,11,"ng-container",6),n.qZA()),2&o){const t=a.ngIf;n.xp6(1),n.Q6J("ngForOf",t)}}function _(o,a){if(1&o&&(n.TgZ(0,"main")(1,"h1",1),n._uU(2),n.qZA(),n.YNc(3,C,2,1,"h1",2),n.YNc(4,x,2,1,"h1",2),n.YNc(5,O,2,1,"div",3),n.ALo(6,"async"),n.qZA()),2&o){const t=a.ngIf,e=n.oxw();n.xp6(2),n.hij(" ","geo"==t?"\u10db\u10d8\u10db\u10d3\u10d8\u10dc\u10d0\u10e0\u10d4 \u10e1\u10d4\u10e1\u10ee\u10d4\u10d1\u10d8":"Current loans"," "),n.xp6(1),n.Q6J("ngIf",e.wrongAmount),n.xp6(1),n.Q6J("ngIf",e.notEnoughAmount),n.xp6(1),n.Q6J("ngIf",n.lcZ(6,4,e.userLoans))}}let P=(()=>{class o{constructor(t,e){this.loginServ=t,this.http=e,this.loggedUserId="",this.lang=new p.X("geo"),this.userLoans=new p.X([]),this.loanArr=[],this.getDate=new Date,this.today=`${this.getDate.getDate()}/${this.getDate.getMonth()}/${this.getDate.getFullYear()}`,this.userAccount={account:"",amount:"",id:""},this.inputAmount=new s.NI("",s.kI.required),this.notEnoughAmount=!1,this.wrongAmount=!1,this.userTransactions=[],this.loginServ.loggedUserId.subscribe(i=>{this.loggedUserId=i}),this.loginServ.language.subscribe(i=>{this.lang.next(i)})}ngOnInit(){this.getLoan(),this.getAccount(),this.getUserTransactions(),this.inputAmount.valueChanges.subscribe(t=>{this.notEnoughAmount=!1,this.wrongAmount=!1})}getUserTransactions(){this.http.getTransaction(this.loggedUserId).pipe((0,h.b)(t=>{this.userTransactions=t.transactions}),(0,u.K)(t=>(console.log(t.message),(0,c.of)("error")))).subscribe()}getAccount(){this.http.getAccount(this.loggedUserId).pipe((0,h.b)(t=>{this.userAccount=t}),(0,u.K)(t=>(console.log(t.message),(0,c.of)("error")))).subscribe()}getLoan(){this.http.getLoan(this.loggedUserId).pipe((0,h.b)(t=>{this.userLoans.next(t.loans),this.loanArr=t.loans}),(0,u.K)(t=>(console.log(t.message),(0,c.of)("error")))).subscribe()}confirm(t){const e=Number(this.inputAmount.value);e>this.loanArr[t].amount||Number(e)<1?this.wrongAmount=!0:e<=this.loanArr[t].amount&&e>Number(this.userAccount.amount)?this.notEnoughAmount=!0:e<=this.loanArr[t].amount&&e<Number(this.userAccount.amount)&&(e<this.loanArr[t].amount?(this.loanArr[t].amount-=e,this.userAccount.amount=String(Number(this.userAccount.amount)-e-e/5),this.userLoans.next(this.loanArr)):e==this.loanArr[t].amount&&(this.loanArr.splice(t,1),this.userAccount.amount=String(Number(this.userAccount.amount)-e-e/5),this.userLoans.next(this.loanArr)),this.userTransactions.push({date:this.today,receiver:"Pay Loan",transferror:this.userAccount.account,amount:e+e/5}),this.updateLoan(),this.updateAccount(),this.updateTransactions(),this.inputAmount.reset())}updateLoan(){this.http.updateLoan(this.loanArr,this.loggedUserId).pipe((0,u.K)(t=>(console.log(t.message),(0,c.of)("error")))).subscribe()}updateAccount(){this.http.updateAccount(this.userAccount).pipe((0,u.K)(t=>(console.log(t.message),(0,c.of)("error")))).subscribe()}updateTransactions(){this.http.updateTransactions(this.userTransactions,this.loggedUserId).pipe((0,u.K)(t=>(console.log(t.message),(0,c.of)("error")))).subscribe()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(d.r),n.Y36(f.f))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-loan"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["class","wrong",4,"ngIf"],["class","loan-container",4,"ngIf"],[1,"wrong"],[1,"loan-container"],[4,"ngFor","ngForOf"],[1,"loans"],[1,"loan"],[1,"confirm"],["type","number",3,"formControl"],[1,"confirm-button",3,"disabled","ngClass","click"]],template:function(t,e){1&t&&(n.YNc(0,_,7,6,"main",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,e.lang))},dependencies:[g.mk,g.sg,g.O5,s.Fj,s.wV,s.JJ,s.oH,g.Ov],styles:["main[_ngcontent-%COMP%]{width:1280px;margin:50px auto auto;border-radius:25px;padding:25px 0;background-color:#fff;display:flex;flex-direction:column}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:50px;padding-left:25px;font-size:24px;font-weight:700;border-bottom:1px solid #00a3e0;margin-bottom:20px}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{width:150px;border:1px solid #00a3e0;border-radius:15px;margin-left:65px;font-size:16px;background-color:#fff}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background-color:#00a3e0;color:#fff;cursor:pointer}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{border:1px solid;background-color:#fff;font-size:16px;border-radius:15px;margin-left:25px;border-color:red;cursor:pointer}main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}main[_ngcontent-%COMP%]   .wrong[_ngcontent-%COMP%]{font-size:20px;color:red;margin-left:50px}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]{height:500px;overflow:auto;display:flex;flex-wrap:wrap;justify-content:space-around;margin-top:25px}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .no-loan[_ngcontent-%COMP%]{width:200px;height:10px;background-color:red}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]{background-color:#00a3e0;color:#fff;font-weight:700;border-radius:25px;margin-bottom:25px;padding:25px 0;width:45%;height:150px;overflow:hidden;transition:.5s linear}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .loan[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;text-align:center}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .loan[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:30%;font-size:20px}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{display:flex;padding:25px 0 0 50px;margin-left:-450px;transition:.5s linear}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:50px;height:30px}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]{width:150px;border:1px solid;background-color:#00a3e0;color:#fff;font-size:16px;border-radius:15px;cursor:pointer;transition:.5s linear}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]   .confirm-button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#00a3e0;font-weight:700}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]   .not-allowed[_ngcontent-%COMP%]:hover{cursor:not-allowed}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]:hover{background-color:#fff;border:5px solid #00a3e0;color:#00a3e0;cursor:pointer}main[_ngcontent-%COMP%]   .loan-container[_ngcontent-%COMP%]   .loans[_ngcontent-%COMP%]:hover   .confirm[_ngcontent-%COMP%]{margin-left:50px}"],changeDetection:0}),o})();var A=r(7590),b=r(346);let E=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.ez,A.m,b.Bz.forChild([{path:"",component:P}])]}),o})()}}]);